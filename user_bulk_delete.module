<?php

//$Id$

/**
 * @file 
 * Form that lists user registration details including added fields 
 * and allow for bulk deletion to cope with spam registrations
 */


/**
 * Implementation of hook_menu().
 */
function user_bulk_delete_menu() {
    $items['user_bulk_delete'] = array(
        'title' => 'Bulk Delete Users', 
        'page callback' => 'user_bulk_delete_page',
        'access arguments' => array('access content'),
    );
    return $items;
}














/**
 * Menu callback.
 * Called when user goes to http://example.com/user_bulk_delete 
 */

function user_bulk_delete_page(){ 
    // get list of fields for 'user' entity type
    $field_collection_fields = field_info_instances('field_collection_item');
    
    foreach($user_fields['field_collection_item'] as $field_name => $field_info) {
        $wewew=234;
    }
    // get all the users on the system
    $users = entity_load('user');
    // initialise our output string that we willl return
    $output_string = '';
    // loop throught the users on the system
   

   
    // Return the HTML generated from the $form data structure 
    // return drupal_get_form('user_bulk_delete_form');
    
    
}


/**
 * Define the form. 
 */
function user_bulk_delete_form(){
    $form['user_name']= array(
        '#title' => t('Your Name'),
        '#type' => 'textfield',
        '#description' => t('Please enter your name.'),
    );
    $form['submit'] = array(
            '#type' => 'submit',
            '#value' => t('Submit')
    );
    return $form;        
}

/**
 * Validate the form. 
 */
function user_bulk_delete_form_validate($form, &$form_state){
    if ($form_state['values']['user_name'] == 'King Kong') {
        // We notify the form API that this field has failed validation.
        form_set_error('user_name', t('King Kong is not allowed to use this form.'));
    }
}

/**
 * Handle post validation form submission.
 */
function user_bulk_delete_form_submit($form, &$form_state){
    $name = $form_state['values']['user_name'];
    drupal_set_message(t('Thanks for filling out the form, %name',
            array('%name' => $name)));
}





